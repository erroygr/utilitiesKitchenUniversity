# utilitiesKitchenUniversity
Сервис автоматизации подачи-обработки ЖКХ заявок: Система контроля состояния кухонного оборудования кампуса

Пользователи: студенты, администраторы, подрядчики

Функциональные роли:
Студент - подача заявки, просмотр поданных заявок;
Подрядчик - выполнение заявок ( перевод заявки в статус готово);
Администратор / подержка - редактирование/удаление заявок, маршрутизация заявок (перевод на другого подрядчика)

Модель данных:
1) Студент: 
    - Фамилия
    - Имя
    - Отчество
    - группа
    - номер студенческого билета
    - дата рождения
    - номер общежития 
    - локация
2) Компания:
    - Имя компании
    - Описание (чем занимается)
    - Количество человек в штате
    - Номер договора (избыточно)
    - До какой даты работают
3) Исполнитель:
    - Компания 
    - ФИО
    - должность
    - ....
4) Заявка:
    - Номер
    - Заявитель
    - Вид заявки (Контроля состояния кухонного оборудования)
    - Тип заявки (Сломалась плита, украли утварь, потеря, закупка, антисанитария)
    - Статус (новая, в работе, обработана, отменена)
    - Описание
    - Локализация (в каком кампусе общежития, этаж)
    - Исполнитель
    - Срок исполнения
    - дата начала
    - дата закрытия
    - ....
    - причина закрытия (статус обработана = null, статус отмена = причина отмены)
5) Локация:
    - Номер общежития
    - Этаж
    - Номер комнаты
6) Админ:
    - ФИО
    - должность

Описание use-case:
Вариант с ручной маршрутизацией заявок
Поломка общего электрического чайника:

        Студент:      
        1. видит неисправность
        2. заходит на портал
        3. заполняет заявку
        4. подает заявку (статус новая). 
              
        Администратор: 
        1. видит новую заявку
        2. просматривает (ищет ошибки)
                - Если ошибок нет -> перенаправляет в компанию подрядчика (статус в обработке).
                - Если ошибки есть -> возвращает студенту на исправление (статус в исправлении).

        Подрядчик:     
        1. получает заявку
        2. выбирает исполнителя
        3. перенаправляет заявку в работу (статус в работе)

        Исполнитель:   
        1. Получает заявку
        2. Если удается решить -> статус заявки = готово.
        - Иначе -> Если ошибки нет/ неправильная маршрутизация заявки/ иная причина  - > статус заявки = отмена.


Описание use-case:
Вариант с автоматической маршрутизацией заявок самой системой ( пропускаются шаги администратора и подрядчика)
Поломка общего электрического чайника:
               
        Студент:      
        1. видит неисправность
        2. заходит на портал
        3. заполняет заявку
        4. подает заявку (статус новая). 

        Система:
        1. определеляет по метаданным заявки кто может ее обработать  -> Список подрядчиков
        2. Определение загруженности подрячиков, выбор исполнителя
        3. передача заявки исполнителю

        Исполнитель:   
        1. Получает заявку
        2. Если удается решить -> статус заявки = готово.
        - Иначе -> Если ошибки нет/ неправильная маршрутизация заявки/ иная причина  - > статус заявки = отмена.
        
        
  Схема базы данных      

![Image alt](https://github.com/erroygr/HomeIncident/blob/main/kitchen/СХЕМА%20БД.jpg) 



RestApi реализован ко всем таблицам бд, со всеми спообами взаимодействия (CRUD)

![Image alt](https://github.com/erroygr/utilitiesKitchenUniversity/blob/master/все%20заявки%20запрос.PNG) 




java-controller лежат контроллеры с реализованными методами rest к бд

на примере : 


    1) Переменная сервисного слоя, через которую происходит общение между с объектами бд и внешними вызовами сервиса
    @Autowired
    adminDataService  AdminDataService  частный;

    2) Метод, с помощью которого можно получить все объекты из бд, аннотирован @GetMapping, в скобках адрес, по которому можно обратиться к rest методу.
        Вызывает у сервиса метод, который озврвщет все объекты, кладет в список и возвращает его
   @GetMapping("/adminData")
    public List<AdminData> showAllAdminData(){
        List<AdminData> adminDataList = adminDataService.getAllAdminDate();
        return adminDataList;
    }

   3) Метод, с помощью которого можно получить объект по его ID из бд, аннотирован @GetMapping, в скобках адрес, по которому можно обратиться к rest методу.
        Вызывает у сервиса метод, который возвращает  объект по переданному ID
    @GetMapping("/adminData/{id}")
    public AdminData getAdminData(@PathVariable int id){
        return adminDataService.getAdminData(id);
    }
    
    4) Метод, с помощью которого можно добавить в бд новый объект, все данные о новом объекте передаются в теле запроса (RequestBody), ID объекта генерируется на                   стороне сервисного слоя данных
        Вызывает у сервиса метод, который возвращает  объект по переданному ID
    @PostMapping("/adminData")
    public AdminData addNewAdminData(@RequestBody AdminData adminData){
        adminDataService.saveAdminData(adminData);
        return adminData;
    }

    5) Метод, с помощью которого можно изменить объект по  переданному в метод ID
    @PutMapping("/adminData")
    public AdminData updateAdminData(@RequestBody AdminData adminData){
        adminDataService.saveAdminData(adminData);
        return adminData;
    }
    6) Метод, с помощью которого можно удалить объект по  переданному в метод ID
    @DeleteMapping("/adminData/{id}")
    public String deleteAdminData(@PathVariable int id){
        adminDataService.deleteAdminData(id);
        return "AdminData с id = " + id + " удален";
    }













